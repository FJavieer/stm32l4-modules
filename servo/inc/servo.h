/******************************************************************************
 *	servo.h								      *
 *	2018/dec/17							      *
 ******************************************************************************/


/******************************************************************************
 ******* include guard ********************************************************
 ******************************************************************************/
# ifndef		SERVO_H
	# define	SERVO_H


/******************************************************************************
 ******* headers **************************************************************
 ******************************************************************************/
/* Standard C ----------------------------------------------------------------*/
	#include <stdint.h>

/* Drivers -------------------------------------------------------------------*/
/* libalx --------------------------------------------------------------------*/
/* STM32L4 modules -----------------------------------------------------------*/


/******************************************************************************
 ******* macros ***************************************************************
 ******************************************************************************/
	# define	SERVO_ANGLE_MIN			(-90)
	# define	SERVO_ANGLE_MAX			(90)


/******************************************************************************
 ******* enums ****************************************************************
 ******************************************************************************/
	enum	Servo_Saturation {
		SERVO_SATURATION_OK = 0,
		SERVO_SATURATION_NEG = -1,
		SERVO_SATURATION_POS = 1
	};

	enum	Servo_Sx {
		SERVO_S1,
		SERVO_S2,
		SERVO_S3,
		SERVO_S4,

		SERVO_QTY
	};


/******************************************************************************
 ******* structs **************************************************************
 ******************************************************************************/


/******************************************************************************
 ******* variables ************************************************************
 ******************************************************************************/


/******************************************************************************
 ******* functions ************************************************************
 ******************************************************************************/
	/**
	 * @brief	Init servos
	 *		Sets global variable 'error'
	 * @return	None
	 */
void	servo_init		(void);

	/**
	 * @brief	Set servo sX position
	 *		Sets global variable 'error'
	 * @param	position:	position (deg)
	 *				valid range: [-90, 90]
	 * @return	Error
	 */
int	servo_sX_position_set	(float position, int8_t servo);

	/**
	 * @brief	Stop servos
	 * @return	None
	 */
void	servo_stop		(void);


/******************************************************************************
 ******* include guard ********************************************************
 ******************************************************************************/
# endif			/* servo.h */


/******************************************************************************
 ******* end of file **********************************************************
 ******************************************************************************/
